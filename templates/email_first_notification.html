{% extends "email_base.html" %}

{% block title %}¡Bienvenido a Green House Project! - Acceso a tu Portal de Cliente{% endblock %}

{% block header_title %}¡Tu Proyecto Solar está en Marcha!{% endblock %}

{% block content %}
    <h2>¡Hola, {{ client_name }}!</h2>
    <p>Te damos una calurosa bienvenida a la familia <strong>Green House Project</strong>. Estamos muy emocionados de acompañarte en tu transición hacia un futuro más sostenible con energía solar.</p>

    <div class="action-box">
        <h3>{{ action_title }}</h3>
        <p>{{ action_description }}</p>
        <p><strong>Fecha de completación:</strong> {{ completion_date }}</p>
    </div>

    <div class="credentials-box">
        <h3>Acceso a tu Portal de Cliente</h3>
        <p>Hemos creado un portal exclusivo para que puedas seguir cada paso de tu proyecto. Para acceder, necesitarás el siguiente ID:</p>
        <div class="id-container">
            <span class="project-id" id="projectId">{{ project_id }}</span>
            <button class="copy-button" onclick="copyToClipboard()">📋 Copiar ID</button>
        </div>
        <a href="{{ portal_url }}" class="button">Ir al Portal de Cliente</a>
        <p style="font-size: 14px; margin-top: 15px;"><strong>Instrucciones:</strong><br>1. Copia tu ID de proyecto haciendo clic en el botón "Copiar ID"<br>2. Haz clic en "Ir al Portal de Cliente"<br>3. Ingresa tu ID para ver todos los detalles</p>
    </div>
    
    <script>
    function copyToClipboard() {
        const text = document.getElementById('projectId').innerText;
        navigator.clipboard.writeText(text).then(function() {
            alert('ID copiado: ' + text);
        }, function() {
            // Fallback para navegadores antiguos
            const textArea = document.createElement("textarea");
            textArea.value = text;
            document.body.appendChild(textArea);
            textArea.select();
            document.execCommand('copy');
            document.body.removeChild(textArea);
            alert('ID copiado: ' + text);
        });
    }
    </script>

    <h3>Próximos Pasos</h3>
    <p>{{ next_steps }}</p>

    <div class="project-info">
        <strong>Resumen de tu proyecto:</strong><br>
        <strong>Proyecto:</strong> {{ project_title }}<br>
        <strong>ID:</strong> {{ project_id }}<br>
        <strong>Ubicación:</strong> {{ project_address }}
    </div>
{% endblock %}

